<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- This meta tag ensures that the website renders correctly across different device sizes, enhancing mobile responsiveness. -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Link to the external CSS stylesheet. Uncomment if you wish to customize or add styling. -->
    <link rel="stylesheet" href="styles.css">

    <title>Database Application</title>
</head>
<body>
    <!-- ===================================================================================== -->
    <!-- Display the current status of the database connection. 
         !!HERE TO HELP U DEBUGGING, NOT REQUIRED IN YOUR OWN PROJECT!!
         -->
    <h1>Social Media Database</h1>

    <h3>Database Connection Status:
        <!-- An in-line placeholder to display connection status. -->
        <span id="dbStatus"> </span>
        <!-- A loading GIF, will be hided once get the status. -->
        <img id="loadingGif" class="loading-gif" src="loading_100px.gif" alt="Loading...">
    </h3>


    <!-- Show 'Demotable'. 
        Data will be fetched and inserted here dynamically using JavaScript. -->
    <h2>Show Demotable</h2>
    <table id="demotable" border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <br><hr><br> <!-- ========================================================================= -->
    <!-- Show 'all tables '.
       Data will be fetched and inserted here dynamically using JavaScript. -->
    <h2>Tables</h2>
    <div id="tablesContainer">
        <table id="tables">
            <thead></thead>
            <tbody></tbody>
        </table>

    </div>

    <br><hr><br> <!-- ========================================================================= -->
    <div class="dropdown">
        <button id="dropdownButton">Select Tables</button>
        <ul id="dropdownMenu" class="dropdown-menu">
            <!-- Options will be dynamically populated -->
        </ul>
        <button id="selectButton">Refresh</button>
    </div>
    <p>Selected Tables: <span id="selectedOptions">None</span></p>
    <!-- Tables will be placed here or above later-->


    <br><hr><br> <!-- ========================================================================= -->

    <h2>Reset Demotable</h2>
    <p>If you wish to reset the table press on the reset button. If this is the first time you're running this page, you MUST use reset</p>
    <button id="resetDemotable"> reset </button> <br>
    <!-- A placeholder to display messages related to the reset operation. -->
    <div id="resetResultMsg"></div>

    <br><hr><br> <!-- ========================================================================= -->

    <h2>Initialize tables</h2>
    <p>Initialize Tables.</p>
    <button id="initTable"> intialize </button> <br>
    <div id="initTableResultMsg"></div>
    <div id="insertTableResultMsg"></div>

    <br><hr><br> <!-- ========================================================================= -->

    <h2>Create Account</h2>
    <p> Please Enter your your information :</p>
    <form id="insertUser">
        <label for="username">Username: </label>
        <input type="text" id ="username" placeholder="Enter Username">
        <label for="email">Email:</label>
        <input type="email" id = "email" placeholder = "Enter Email">
        <label for="displayName">Display Name: </label>
        <input type="text" id = "displayName" placeholder = "Enter Display Name">
        <button type = "submit">Create Account</button>
        <div id = "insertUserMsg"></div>
    </form>

    <br><hr><br> <!-- ========================================================================= -->

    <h2>Create Post</h2>
    <form id ="insertPost">
        <label for="user">Username</label>
        <input type="text" id = "user">
        <h3>Title</h3>
        <input type="text" id = "title" placeholder="Enter Title">
        <label for="community">Community</label>
        <input type="text" id = "community" placeholder="Community">
        <textarea id="content" placeholder="Write your post here..."></textarea>
        <button type = "submit">Post</button>
        <div id="insertPostMsg"></div>
    </form>

    <br><hr><br> <!-- ========================================================================= -->

    <h2> Insert Values into DemoTable </h2>
    <form id="insertDemotable">
        ID: <input type="number" id="insertId" placeholder="Enter ID" required> <br><br>
        Name: <input type="text" id="insertName" placeholder="Enter Name" maxlength="20"> <br><br>

        <button type="submit"> insert </button> <br>
    </form>
    <div id="insertResultMsg"></div>

    <br><hr><br> <!-- UPDATE========================================================================= -->
    <h2>Update Attributes of User</h2>
    <p>The values are case sensitive and if you enter in the wrong case, the update statement will not do anything.</p>
    <button onclick="displayTuplesForUpdate();">Show Tuples</button>
    <table id="updateTuplesTable">
        <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Display Name</th>
                <th>Date Joined</th>
            </tr>
        </thead>
        <tbody>
        </tbody>    
    </table>
    <div>
        <h4 id="selectARowMsg"> Select a row </h4> 
        <h4 id="updateUsername"></h4> 
    </div>
    <form id="updateDemotable" style="display: none;" onsubmit="updateUser(event)">
        Email: <input type="text" id="updateEmail" maxlength="50"> <br>
        DisplayName: <input type="text" id="updateDisplayName" required> <br>
        Date Joined: <input type="date" id="updateDateJoined" required> <br>
        <button type="submit" > update </button> <br>
    </form>
    <div id="updateNameResultMsg"></div>
     <!-- END OF UPDATE======================================================================== -->
    




    <br><hr><br> <!-- SELECTION========================================================================= -->
    <h2>Selection: Search Award</h2>
    <p>clauses will be read from top to bottom (first AND/OR second) AND/OR third ...) </p>

    <form id="selectionForm" onsubmit="searchAward(event)">
        <div id="clausesContainer">
            <!-- Conditions will be dynamically added here -->
        </div>
        <button type="button" id="addClauseButton" onclick="addClause();" >Add Clause</button> 
        <br><br>
        <button type="submit">Search</button>
    </form>
     <!-- END OF SELECTION======================================================================== -->








    <br><hr><br> <!-- AGGREGATION WITH HAVING========================================================================= -->
    <h2>Search for Users who has given at least 5 awards</h2>
    <button id="aHShowTableBtn" onclick="generateAgregateHavingTable();">Show Table</button>

    <table id="aggregateHavingTable" style="display: none">
        <thead>
            <tr>
                <th>Username</th>
                <th>Number of Awards Given</th>
            </tr>
        </thead>
        <tbody>
            <!-- rows hre -->
        </tbody>    
    </table>
    <br>
    <div style="display: flex; gap: 10px;">
        <button id="aHHideTableBtn" style="display: none" onclick="HideAgregateHavingTable();">Hide Table</button>
        <button id="aHRefreshTableBtn" style="display: none" onclick="generateAgregateHavingTable();">Refresh</button>
    </div>

    <div id="aggregateHavingResultMsg"></div>
    <br><hr><br> <!-- END OF AGGREGATION WITH HAVING======================================================================== -->




    <!-- <h2>Count the Tuples in DemoTable</h2>
    <button id="countDemotable"> count </button> <br><br> -->
    <!-- A placeholder to display the count result. -->
    <!-- <div id="countResultMsg"></div> <br> -->

    <!-- ===================================================================================== -->
    <!-- External JavaScript file that contains the functionality/logic for the operations above. -->
    <script src="scripts.js"></script>
    <script src="update.js"></script>
    <script src="selection.js"></script>
    <script src="aggregateHaving.js"></script>
</body>
</body>
</html>
