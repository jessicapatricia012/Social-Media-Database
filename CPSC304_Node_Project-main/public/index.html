<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- This meta tag ensures that the website renders correctly across different device sizes, enhancing mobile responsiveness. -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Link to the external CSS stylesheet. Uncomment if you wish to customize or add styling. -->
    <link rel="stylesheet" href="styles.css">

    <title>Database Application</title>
</head>
<body>
    <!-- ===================================================================================== -->
    <!-- Display the current status of the database connection. 
         !!HERE TO HELP U DEBUGGING, NOT REQUIRED IN YOUR OWN PROJECT!!
         -->
    <h1>Social Media Database</h1>

    <h3>Database Connection Status:
        <!-- An in-line placeholder to display connection status. -->
        <span id="dbStatus"> </span>
        <!-- A loading GIF, will be hided once get the status. -->
        <img id="loadingGif" class="loading-gif" src="loading_100px.gif" alt="Loading...">
    </h3>

    <h2>Initialize tables</h2>
    <p>Initialize Tables.</p>
    <button id="initTable"> initialize </button> <br>
    <div id="initTableResultMsg"></div>
    <div id="insertTableResultMsg"></div>

    <br><hr><br> <!-- ========================================================================= -->

    <!-- Show tables. Data will be fetched and inserted here dynamically using JavaScript. -->
    <h2>Tables</h2>
    <div class="dropdown">
        <button id="dropdownButton">Select Tables</button>
        <ul id="dropdownMenu" class="dropdown-menu">
            <!-- Options will be dynamically populated -->
        </ul>
    </div>
    <!-- Tables will be placed here later-->
    <div id="showTablesContainer">
        <table id="showTables">
            <thead></thead>
            <tbody></tbody>
        </table>

    </div>

    <br><hr><br> <!-- Projection ========================================================================= -->

    <h1>Projection</h1>
    <h2> Choose tables to project </h2>
    <p>Order the features you want to display</p>
    <div class="projectDropdown">
        <button id="projectDropdownButton">Select Tables</button>
        <ul id="projectDropdownMenu" class="dropdown-menu">
            <!-- Options will be dynamically populated -->
        </ul>
        <button id="selectButton">Refresh</button>
    </div>

    <h3><span id="projectSelectedOptions"></span></h3>
    <form id= "projectRow">
        <!-- Form will be dynamically created-->
    </form>
    <div id="projectionTablesContainer">
        <table id="projectionTables">
            <thead></thead>
            <tbody></tbody>
        </table>

    </div>

    <br><hr><br> <!-- Join ========================================================================= -->

    <h2> Look at Entries created by a user</h2>
    <form id="joinForm">
        <h3>Select Attributes to Include:</h3>
        <!--User check boxes-->
        <fieldset>
            <legend>Users Table</legend>
            <input type="checkbox" id="joinUsername" name="attributes" value="Users.username">
            <label for="joinUsername">Username</label><br>
            <input type="checkbox" id="joinEmail" name="attributes" value="Users.email">
            <label for="joinEmail">Email</label><br>
            <input type="checkbox" id="joinDisplayName" name="attributes" value="Users.displayName">
            <label for="joinDisplayName">Display Name</label><br>
            <input type="checkbox" id="joinDateJoined" name="attributes" value="Users.dateJoined">
            <label for="joinDateJoined">Date Joined</label><br>
        </fieldset>
        <!--Entry check boxes-->
        <fieldset>
            <legend>EntryCreatedBy Table</legend>
            <input type="checkbox" id="JoinEntryID" name="attributes" value="EntryCreatedBy.entryID">
            <label for="joinEntryID">Entry ID</label><br>
            <input type="checkbox" id="joinDateCreated" name="attributes" value="EntryCreatedBy.dateCreated">
            <label for="joinDateCreated">Date Created</label><br>
            <input type="checkbox" id="joinContent" name="attributes" value="EntryCreatedBy.content">
            <label for="joinContent">Content</label><br>
        </fieldset>
        <p>Write down which user you would like to preview</p>
        <input type="text" id="usernameInput" placeholder="Enter username">

        <!-- button to call join-->
        <button id= "joinButton">Submit</button>
    </form>
    <div id="joinResult"></div>
    <!--table to show result-->
    <div id="joinTablesContainer">
        <table id="joinTables">
            <thead></thead>
            <tbody></tbody>
        </table>

    </div>



    <br><hr><br> <!-- ========================================================================= -->

    <h2>Reset Database</h2>
    <p>Click 'Reset' to reset the database.</p>
    <button id="resetDatabaseButton"> Reset </button>
    <div id="resetDatabaseResultMsg"></div>

    <br><hr><br> <!-- ========================================================================= -->

    <h2>Create Account</h2>
    <p> Please Enter your your information :</p>
    <form id="insertUser">
        <label for="username">Username: </label>
        <input type="text" id ="username" placeholder="Enter Username">
        <label for="email">Email:</label>
        <input type="email" id = "email" placeholder = "Enter Email">
        <label for="displayName">Display Name: </label>
        <input type="text" id = "displayName" placeholder = "Enter Display Name">
        <button type = "submit">Create Account</button>
        <div id = "insertUserMsg"></div>
    </form>

    <br><hr><br> <!-- ========================================================================= -->

    <h2>Create Post</h2>
    <form id ="insertPost">
        <label for="user">Username</label>
        <input type="text" id = "user">
        <h3>Title</h3>
        <input type="text" id = "title" placeholder="Enter Title">
        <label for="community">Community</label>
        <input type="text" id = "community" placeholder="Community">
        <textarea id="content" placeholder="Write your post here..."></textarea>
        <button type = "submit">Post</button>
        <div id="insertPostMsg"></div>
    </form>

    <br><hr><br> <!-- ========================== DELETE USER =============================================== -->

    <h2>Delete Account</h2>
    <div class = "deleteUserHeader" >
    <p>Select an Account to Delete</p>
    <button id = "selectAccount">Hide Table</button>
    </div>

    <table id = "deleteUserTable"> 
        <thead>
            <tr>
                <th>Username</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class = "selectedDelete">Some User</td>
            </tr>
        </tbody>
    </table>
    <button id = "deleteButton">Delete</button>
    <div id="deleteUserMsg"></div>



    <br><hr><br> <!-- UPDATE========================================================================= -->
    <h2>Update Attributes of User</h2>
    <button id = "updateShowBtn" onclick="displayTuplesForUpdate();">Show Users</button>
    <div style="display: flex; gap: 10px;">
        <button id="updateHideBtn" style="display: none" onclick="HideUpdateTable();">Hide Table</button>
        <button id="updateRefreshBtn" style="display: none" onclick="displayTuplesForUpdate();">Refresh</button>
    </div>
    <br>
    <table id="updateTuplesTable" style="display: none;">
        <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Display Name</th>
                <th>Date Joined</th>
            </tr>
        </thead>
        <tbody>
        </tbody>    
    </table>

    <div>
        <h4 id="selectARowMsg" style="display: none;"> Select a row </h4> 
    </div>
    <form id="updateForm" style="display: none;" onsubmit="updateUser(event)">
        Username: <input type="text" id="updateUsername" readonly> <br>
        Email (this has to be unique): <input type="text" id="updateEmail" maxlength="50"> <br>
        DisplayName: <input type="text" id="updateDisplayName" required> <br>
        Date Joined: <input type="date" id="updateDateJoined" readonly> <br>
        <button type="submit" > update </button> <br>
    </form>
    <div id="updateNameResultMsg"></div>
     <!-- END OF UPDATE======================================================================== -->
    




    <br><hr><br> <!-- SELECTION========================================================================= -->
    <h2>Selection: Search Award</h2>
    <p>clauses will be read from top to bottom (first AND/OR second) AND/OR third ...) </p>

    <form id="selectionForm" onsubmit="searchAward(event)">
        <div id="clausesContainer">
            <!-- Conditions will be dynamically added here -->
        </div>
        <button type="button" id="addClauseButton" onclick="addClause();" >Add Clause</button> 
        <br><br>
        <button type="submit">Search</button>
    </form>
     <!-- END OF SELECTION======================================================================== -->





    <br><hr><br> <!-- AGGREGATION WITH HAVING========================================================================= -->
    <h2>Search for Users who has given at least 5 awards</h2>
    <button id="aHShowTableBtn" onclick="generateAgregateHavingTable();">Show Table</button>
    <div style="display: flex; gap: 10px;">
        <button id="aHHideTableBtn" style="display: none" onclick="HideAgregateHavingTable();">Hide Table</button>
        <button id="aHRefreshTableBtn" style="display: none" onclick="generateAgregateHavingTable();">Refresh</button>
    </div>
    <br>
    <table id="aggregateHavingTable" style="display: none">
        <thead>
            <tr>
                <th>Username</th>
                <th>Number of Awards Given</th>
            </tr>
        </thead>
        <tbody>
            <!-- rows hre -->
        </tbody>    
    </table>
    <br>
    <div id="aggregateHavingResultMsg"></div>
    <!-- END OF AGGREGATION WITH HAVING======================================================================== -->




    <br><hr><br> <!-- DIVISION ========================================================================= -->
    <h2>Search for Users who has joined all Comminities</h2>
    <button id="divisionShowBtn" onclick="divisionShowUser();">Show Users</button>
    <div style="display: flex; gap: 10px;">
        <button id="divisionHideBtn" style="display: none" onclick="HideDivisionTable();">Hide Table</button>
        <button id="divisionRefreshBtn" style="display: none" onclick="divisionShowUser();">Refresh</button>
    </div>
    <br>
    <table id="divisionTable" style="display: none">
        <thead>
            <tr>
                <th>Username</th>
                <th>Display Name</th>
            </tr>
        </thead>
        <tbody>
            <!-- rows hre -->
        </tbody>    
    </table>
    <div id="divisionResultMsg"></div>
    <!-- END OF DIVISION ======================================================================== -->














    <!-- <h2>Count the Tuples in DemoTable</h2>
    <button id="countDemotable"> count </button> <br><br> -->
    <!-- A placeholder to display the count result. -->
    <!-- <div id="countResultMsg"></div> <br> -->

    <!-- ===================================================================================== -->
    <!-- External JavaScript file that contains the functionality/logic for the operations above. -->
     <script src = "delete.js"></script>
    <script src="scripts.js"></script>
    <script src="update.js"></script>
    <script src="selection.js"></script>
    <script src="aggregateHaving.js"></script>
    <script src="division.js"></script>
</body>
</body>
</html>
